{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import Navigation from'./components/Nav';import Settings from'./components/Settings';import Home from'./components/Home';import Chart from'./components/Chart';import iDB from'./data/indexedDb';var dbName=\"10for20\";var store={tasks:\"tasks\",entries:\"entries\"};var DB_VER=1;var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={section:\"home\",tasks:[],entries:[]};_this.setSection=_this.setSection.bind(_assertThisInitialized(_this));_this.updateTasks=_this.updateTasks.bind(_assertThisInitialized(_this));_this.addEntry=_this.addEntry.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"getData\",value:function getData(){var db,tasks,entries,res;return _regeneratorRuntime.async(function getData$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(iDB.init(dbName,DB_VER,[store.tasks,store.entries]));case 3:db=_context.sent;_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 9:if(!db){_context.next=29;break;}_context.prev=10;_context.next=13;return _regeneratorRuntime.awrap(iDB.getOne(dbName,DB_VER,store.tasks,1));case 13:res=_context.sent;if(res){tasks=res.tasks;}_context.next=20;break;case 17:_context.prev=17;_context.t1=_context[\"catch\"](10);console.error(_context.t1);case 20:_context.prev=20;_context.next=23;return _regeneratorRuntime.awrap(iDB.getAll(dbName,DB_VER,store.entries));case 23:entries=_context.sent;_context.next=29;break;case 26:_context.prev=26;_context.t2=_context[\"catch\"](20);console.error(_context.t2);case 29:if(!tasks){tasks=[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"];}if(!entries){entries=[];}this.setState({tasks:tasks,entries:entries});case 32:case\"end\":return _context.stop();}}},null,this,[[0,6],[10,17],[20,26]]);}},{key:\"setSection\",value:function setSection(section){this.setState({section:section});}},{key:\"updateTasks\",value:function updateTasks(tasks){this.setState({tasks:tasks});iDB.addOrUpdateOne(dbName,DB_VER,store.tasks,{id:1,tasks:tasks}).then(function(message){console.log(message);}).catch(function(message){console.error(message);});}},{key:\"addEntry\",value:function addEntry(entry){entry.id=new Date().valueOf();var entries=this.state.entries;entries.push(entry);this.setState({entries:entries});iDB.addOrUpdateOne(dbName,DB_VER,store.entries,entry).then(function(message){console.log(message);}).catch(function(message){console.error(message);});}},{key:\"render\",value:function render(){console.log(\"App state:\",this.state);return React.createElement(React.Fragment,null,React.createElement(Navigation,{current:\"Current\",bg:\"light\",textTheme:\"light\",setSection:this.setSection}),this.state.section===\"home\"&&React.createElement(Home,{style:pageBg,tasks:this.state.tasks,updateTasks:this.updateTasks,updateEntries:this.addEntry}),this.state.section===\"chart\"&&React.createElement(Chart,{style:pageBg,tasks:this.state.tasks,entries:this.state.entries,updateTasks:this.updateTasks}),this.state.section===\"settings\"&&React.createElement(Settings,{style:pageBg,tasks:this.state.tasks}));}}]);return App;}(React.Component);export{App as default};var pageBg={backgroundColor:\"lightgrey\",height:\"100vh\",padding:\"20px\",paddingTop:\"76px\"};","map":{"version":3,"sources":["C:/Users/ceg94/Development/10for20challenge/src/App.tsx"],"names":["React","Navigation","Settings","Home","Chart","iDB","dbName","store","tasks","entries","DB_VER","App","props","state","section","setSection","bind","updateTasks","addEntry","getData","init","db","console","error","getOne","res","getAll","setState","addOrUpdateOne","id","then","message","log","catch","entry","Date","valueOf","push","pageBg","Component","backgroundColor","height","padding","paddingTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Navigation from './components/Nav';\r\nimport Settings from './components/Settings';\r\nimport Home from './components/Home';\r\nimport Chart from './components/Chart';\r\nimport iDB from './data/indexedDb';\r\n\r\nlet dbName = \"10for20\";\r\nlet store = {\r\n  tasks: \"tasks\",\r\n  entries: \"entries\"\r\n};\r\nconst DB_VER = 1;\r\n\r\nexport default class App extends React.Component<any,any> {\r\n  constructor(props:any){\r\n    super(props);\r\n    this.state = {\r\n      section: \"home\",\r\n      tasks: [],\r\n      entries: []\r\n    };\r\n    this.setSection = this.setSection.bind(this);\r\n    this.updateTasks = this.updateTasks.bind(this);\r\n    this.addEntry = this.addEntry.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  async getData(){\r\n    let db;\r\n    let tasks;\r\n    let entries;\r\n    try {\r\n      db = await iDB.init(dbName, DB_VER, [store.tasks, store.entries]);\r\n    } catch(e) {\r\n      console.error(e);\r\n    }\r\n    if(db){\r\n      try {\r\n        let res = await iDB.getOne(dbName, DB_VER, store.tasks, 1);\r\n        if(res){\r\n          tasks = (res as any).tasks;\r\n        }\r\n      } catch(e) {\r\n        console.error(e);\r\n      }\r\n      try {\r\n        entries = await iDB.getAll(dbName, DB_VER, store.entries);\r\n      } catch(e) {\r\n        console.error(e);\r\n      }\r\n    }\r\n    if(!tasks){\r\n      tasks = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\r\n    }\r\n    if(!entries){\r\n      entries = [];\r\n    }\r\n    this.setState({\r\n      tasks: tasks,\r\n      entries: entries\r\n    })\r\n  }\r\n\r\n  setSection(section:string) {\r\n    this.setState({\r\n      section:section\r\n    });\r\n  }\r\n\r\n  updateTasks(tasks:any){\r\n    this.setState({\r\n      tasks: tasks\r\n    });\r\n    iDB.addOrUpdateOne(dbName, DB_VER, store.tasks, {id:1, tasks:tasks})\r\n    .then((message)=>{\r\n      console.log(message);\r\n    }).catch((message)=>{\r\n      console.error(message);\r\n    });\r\n  }\r\n\r\n  addEntry(entry:any){\r\n    entry.id = new Date().valueOf();\r\n    let entries = this.state.entries;\r\n    entries.push(entry);\r\n    this.setState({\r\n      entries: entries\r\n    });\r\n    iDB.addOrUpdateOne(dbName, DB_VER, store.entries, entry)\r\n    .then((message)=>{\r\n      console.log(message);\r\n    }).catch((message)=>{\r\n      console.error(message);\r\n    });\r\n  }\r\n\r\n  render(){\r\n    console.log(\"App state:\", this.state);\r\n    return(\r\n      <>\r\n        <Navigation\r\n          current=\"Current\" \r\n          bg=\"light\" \r\n          textTheme=\"light\"\r\n          setSection={this.setSection} />\r\n        { this.state.section === \"home\" &&\r\n          <Home style={pageBg} tasks={this.state.tasks} updateTasks={this.updateTasks} updateEntries={this.addEntry} />\r\n        }\r\n        { this.state.section === \"chart\" &&\r\n          <Chart style={pageBg} tasks={this.state.tasks} entries={this.state.entries} updateTasks={this.updateTasks} />\r\n        }\r\n        { this.state.section === \"settings\" &&\r\n          <Settings style={pageBg} tasks={this.state.tasks} />\r\n        }\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst pageBg = {\r\n  backgroundColor: \"lightgrey\",\r\n  height: \"100vh\",\r\n  padding: \"20px\",\r\n  paddingTop: \"76px\"\r\n};"]},"metadata":{},"sourceType":"module"}