{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ceg94\\\\Development\\\\10for20challenge\\\\src\\\\App.tsx\";\nimport React from 'react';\nimport Navigation from './components/Nav';\nimport Settings from './components/Settings';\nimport Home from './components/Home';\nimport Chart from './components/Chart';\nimport iDB from './data/indexedDb';\nlet dbName = \"10for20\";\nlet stores = {\n  tasks: \"tasks\",\n  entries: \"entries\"\n};\nconst DB_VER = 1;\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      section: \"home\",\n      tasks: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n      entries: []\n    };\n    this.setSection = this.setSection.bind(this);\n    this.updateTasks = this.updateTasks.bind(this);\n    this.addEntry = this.addEntry.bind(this);\n  }\n\n  componentDidMount() {\n    iDB.init(dbName, DB_VER, [stores.tasks, stores.entries]).then(message => {\n      console.log(message);\n      iDB.getAll(dbName, DB_VER, stores.tasks).then(tasks => {\n        this.updateTasks(tasks);\n        iDB.getAll(dbName, DB_VER, stores.entries).then(entries => {\n          if (Array.isArray(entries)) {\n            entries.forEach(entry => {\n              this.addEntry(entry);\n            });\n          }\n        }).catch(message => {\n          console.error(message);\n        });\n      }).catch(message => {\n        console.error(message);\n      });\n    }).catch(message => {\n      console.error(message);\n    });\n  }\n\n  setSection(section) {\n    this.setState({\n      section: section\n    });\n  }\n\n  updateTasks(tasks) {\n    this.setState({\n      tasks: tasks\n    });\n    console.log(\"setting tasks in DB...\");\n    iDB.addOrUpdateMany(dbName, DB_VER, stores.tasks, tasks).then(message => {\n      console.log(\"success setting tasks\");\n      console.log(message);\n    }).catch(message => {\n      console.log(\"error setting tasks\");\n      console.error(message);\n    });\n  }\n\n  addEntry(entry) {\n    let entries = this.state.entries;\n    entries.push(entry);\n    this.setState({\n      entries: entries\n    });\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(Navigation, {\n      current: \"Current\",\n      bg: \"light\",\n      textTheme: \"light\",\n      setSection: this.setSection,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), this.state.section === \"home\" && React.createElement(Home, {\n      style: pageBg,\n      tasks: this.state.tasks,\n      updateTasks: this.updateTasks,\n      updateEntries: this.addEntry,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), this.state.section === \"chart\" && React.createElement(Chart, {\n      style: pageBg,\n      tasks: this.state.tasks,\n      entries: this.state.entries,\n      updateTasks: this.updateTasks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), this.state.section === \"settings\" && React.createElement(Settings, {\n      style: pageBg,\n      tasks: this.state.tasks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }));\n  }\n\n}\nconst pageBg = {\n  backgroundColor: \"lightgrey\",\n  height: \"100vh\",\n  padding: \"20px\",\n  paddingTop: \"76px\"\n};","map":{"version":3,"sources":["C:/Users/ceg94/Development/10for20challenge/src/App.tsx"],"names":["React","Navigation","Settings","Home","Chart","iDB","dbName","stores","tasks","entries","DB_VER","App","Component","constructor","props","state","section","setSection","bind","updateTasks","addEntry","componentDidMount","init","then","message","console","log","getAll","Array","isArray","forEach","entry","catch","error","setState","addOrUpdateMany","push","render","pageBg","backgroundColor","height","padding","paddingTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Navigation from './components/Nav';\r\nimport Settings from './components/Settings';\r\nimport Home from './components/Home';\r\nimport Chart from './components/Chart';\r\nimport iDB from './data/indexedDb';\r\n\r\nlet dbName = \"10for20\";\r\nlet stores = {\r\n  tasks: \"tasks\",\r\n  entries: \"entries\"\r\n};\r\nconst DB_VER = 1;\r\n\r\nexport default class App extends React.Component<any,any> {\r\n  constructor(props:any){\r\n    super(props);\r\n    this.state = {\r\n      section: \"home\",\r\n      tasks: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      entries: []\r\n    };\r\n    this.setSection = this.setSection.bind(this);\r\n    this.updateTasks = this.updateTasks.bind(this);\r\n    this.addEntry = this.addEntry.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    iDB.init(dbName, DB_VER, [stores.tasks, stores.entries])\r\n    .then((message)=>{\r\n      console.log(message);\r\n      iDB.getAll(dbName, DB_VER, stores.tasks)\r\n      .then((tasks)=>{\r\n        this.updateTasks(tasks)\r\n        iDB.getAll(dbName, DB_VER, stores.entries)\r\n        .then((entries)=>{\r\n          if(Array.isArray(entries)){\r\n            entries.forEach((entry)=>{\r\n              this.addEntry(entry);\r\n            });\r\n          }\r\n        }).catch((message:string)=>{\r\n          console.error(message);\r\n        })\r\n      }).catch((message:string)=>{\r\n        console.error(message);\r\n      });\r\n    }).catch((message:string) => {\r\n      console.error(message);\r\n    });\r\n  }\r\n\r\n  setSection(section:string) {\r\n    this.setState({\r\n      section:section\r\n    });\r\n  }\r\n\r\n  updateTasks(tasks:any){\r\n    this.setState({\r\n      tasks: tasks\r\n    });\r\n    console.log(\"setting tasks in DB...\")\r\n    iDB.addOrUpdateMany(dbName, DB_VER, stores.tasks, tasks)\r\n    .then((message)=>{\r\n      console.log(\"success setting tasks\")\r\n      console.log(message);\r\n    }).catch((message)=>{\r\n      console.log(\"error setting tasks\")\r\n      console.error(message);\r\n    });\r\n  }\r\n\r\n  addEntry(entry:any){\r\n    let entries = this.state.entries;\r\n    entries.push(entry);\r\n    this.setState({\r\n      entries: entries\r\n    });\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <>\r\n        <Navigation\r\n          current=\"Current\" \r\n          bg=\"light\" \r\n          textTheme=\"light\"\r\n          setSection={this.setSection} />\r\n        { this.state.section === \"home\" &&\r\n          <Home style={pageBg} tasks={this.state.tasks} updateTasks={this.updateTasks} updateEntries={this.addEntry} />\r\n        }\r\n        { this.state.section === \"chart\" &&\r\n          <Chart style={pageBg} tasks={this.state.tasks} entries={this.state.entries} updateTasks={this.updateTasks} />\r\n        }\r\n        { this.state.section === \"settings\" &&\r\n          <Settings style={pageBg} tasks={this.state.tasks} />\r\n        }\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst pageBg = {\r\n  backgroundColor: \"lightgrey\",\r\n  height: \"100vh\",\r\n  padding: \"20px\",\r\n  paddingTop: \"76px\"\r\n};"]},"metadata":{},"sourceType":"module"}